Haste Breakpoints for a Shadow Priest
======================================

In Cataclysm a casters DoTs can gain an extra tick when they gave enough new haste.
For a Shadow Priest the following spells are effected by this:
1) Shadow Word: Pain
2) Vampiric Touch
3) Devouring Plague
4) Improved Devouring Plague.

For most DoTs you determine the number of ticks it will do by applying the following formula:

adjusted_num_ticks = round( base_tick_time * base_num_ticks * 1000.0 / round( 1000.0 * base_tick_time / player_haste ))

Where round() means it rounds the number to the nearest integer, and player_haste is the combined haste of the player including buffs expressed as a multiple. i.e. 5% haste is 1.05. 15% is 1.15.
Of note is the 1000.0 that appears twice. This is because Blizzard round things off to 3 decimal places.

For example: Vampiric Touch has a base_tick_time of 3.0 seconds. It has a base_num_ticks of 5. Darkness gives 3% haste, Mind Quickening gives 5%. Let's say we had 10% haste from haste rating.
Haste stacks multiplicatively so our player_haste would be: 1.03 * 1.05 * 1.10 = 1.18965

Plugging these numbers into the formula:

adjusted_num_ticks = round( 3.0 * 5 * 1000.0 / round( 1000.0 * 3.0 / 1.18965 ) )
                   = 6

Thus with 10% haste from gear we have 6 ticks on Vampiric Touch. 10% haste from gear at level 85 is 1280.57159423828125 Haste Rating. 
So we'd know if we had 1281 Haste Rating (and 3/3 Darkness and Mind Quickening) that we'd have 6 ticks of Vampiric Touch per cast.

Now that formula works for Shadow Word: Pain, Vampiric Touch and Devouring Plague. It doesn't however work exactly like that for Improved Devouring Plague.
Instead Improved Devouring Plague bases its damage off a slightly different number of ticks.


idp_adjusted_num_ticks = ceil( base_tick_time * base_num_ticks * 1000.0 / round( 1000.0 * base_tick_time / player_haste ))

i.e. Whereas normal DoTs round off to the nearest integer, Improved Devouring Plague always rounds up to the nearest integer.

Improved Devouring Plague has another bug in that it *only* benefits from Haste Rating. It gets no benefit from Darkness, Mind Quickening, Berserking or Bloodlust/Heroism.


Knowing all this we can calculate the "breakpoints" for each DoT. i.e. The point where it suddenly gains another tick of duration when cast.
Here are the results assuming 3/3 Darkness and Mind Quickening (the 5% haste buff) are active:


Shadow Word: Pain
-----------------

Ticks		Rating Required		w/Dark Intent
------		---------------		-------------
6		0			0
7		21			0
8		1993			1562
9		3970			3482
10		5945			5399
11		7913			7310


Vampiric Touch
--------------

Ticks		Rating Required		w/Dark Intent
------		---------------		-------------
5		0			0
6		218			0
7		2589			2141
8		4951			4434
9		7326			6740


Devouring Plague
----------------

Ticks		Rating Required		w/Dark Intent
------		---------------		-------------
8		0			0
9		0			0		
10		1255			845
11		2737			2284
12		4211			3724
13		5691			5152
14		7179			6597



Improved Devouring Plague
-------------------------

Ticks		Rating Required		w/Dark Intent
------		---------------		-------------
8		0			0
9		3			3
10		1602			1602
11		3199			3199
12		4805			4805
13		6408			6408
14		8000			8000



So how valuable are the various breakpoints to reach for DPS?
Results of a test that uses SimulationCraft to test a Priest_Shadow_T11_372.simc priest with its haste levels changed to be 1 below a breakpoint and then at the breakpoint can be found at:
http://www.simulationcraft.org/ShadowPriest_372_Haste_Breakpoints.html

Each profile is named in the format: p372_<X> where X is the amount of Haste Rating it has.
Looking at the results you can see that:
a) A Shadow Word: Pain breakpoint gives no sudden spike of DPS gained. This is of course expected as SW:P is constantly being refreshed anyway.
b) The DP breakpoint at 1255 haste gives +37DPS. The one at 2737 Haste gives +11 DPS.
c) The VT breakpoint at 218 haste gives +154DPS. The one at 2589 Haste gives +47 DPS.
d) The IDP breakpoint at 3 Haste gives +74 DPS. The one at 1602 Haste gives +78 DPS. The one at 3205 Haste gives +77 DPS.

What does all this mean?

It means that Haste Scaling Factors need to be calculated carefully if they cross over an IDP, VT or DP breakpoint.


This doesn't of course mean you should suddenly stop gearing Haste once you reach these breakpoints.
It still does scale pretty well but it's possible that another stat like Crit *might* overtake it for a while. 


-- Delmortis/Althor


